<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <meta name="Copyright" content="&copy;2005-2006 DuoMark International, Inc." />
  <title>DuoMark Comparative Erlang Benchmarking</title>

  <link rel="stylesheet" href="/css/reset.css" media="screen, projection">
  <link rel="stylesheet" href="/css/theme.css" media="screen, projection">

  <style>
  .bench_graph div {
    font: 10px sans-serif;
    background-color: #9D2D23;
    text-align: right;
    padding: 3px;
    margin: 1px;
    margin-left:20px;
    color: white;
  }
  </style>
</head>
<body>
  <div class="page">
   <div class="content">
    <header class="page_hdr">
      <h1>Erlang Benchmark Comparisons</h1>
    </header>

    <section class="benchmark">
      <header class="bench_form_hdr">
        <h2>Select Test</h2>
      </header>
      <section class="bench_form">

        <script src="/js/d3.min.js"></script>
        <script>
          function d3_submit() {
            var form = document.benchmark_request;
            var bench_choice = form.bench.value;
            var elems = form.elems.value;
            var times = form.times.value;
            var url = window.location + "bench_results.yaws?bench=" + bench_choice + "&elems=" + elems + "&times=" + times;
            d3.json(url, function(json) {
               var len = json.results.length;
               var data = [];
               for (i=0;i<len-1;i++) {
                 data.push(json.results[i].loop_time.npm);
               }
               var chart = d3.select(".bench_graph");
               chart.selectAll("div").data(data).enter().append("div")
                    .style("width", function(d) { return d * 10 + "px"; })
                    .text(function(d) { return d; });
               var x = d3.scale.linear().domain([0, d3.max(data)]).range(["0px", "420px"]);
            })
          }
        </script>

        <form name="benchmark_request" method="get">
          <ul>
            <li>
              <label for="bench" style="text-align:left">Benchmark</label>
              <select name="bench" style="text-align:right">
                <option value="fun_call">Function Call</option>
                <option value="bin_comp">Binary Comprehension</option>
                <option value="tuple_inx">Tuple Indexing</option>
                <option value="mq_raw">Message Send/Receive</option>
              </select>
            </li>
            <li><label for="elems" style="text-align:left">Elements</label>
                <input name="elems" type="number" min="1" max="1000000" value="1000"></li>
            <li><label for="times" style="text-align:left">Repeat</label>
                <input name="times" type="number" min="1" max="100" value="10"></li>
          </ul>
          <b><input type="button" value="Run Benchmark" onclick="d3_submit()" /></b>
        </form>
      </section>
      <footer class="bench_form_ftr">
      </footer>
    </section> <!-- /end .benchmark -->

    <section class="main">
      <header class="main_hdr">
        <h2>Performance Results</h2>
      </header>
      <section id="bench_graph" class="bench_graph">
      </section>
      <section class="bench_data">
      </section>
      <footer class="main_ftr">
      </footer>
    </section> <!-- /end .main -->

    <footer class="page_ftr">
      <a href="http://www.duomark.com/"><img style="float:right" src="/icons/dmlogo.gif" valign="bottom"></a>
    </footer>
   </div> <!-- /end .content -->
  </div> <!-- /end .page -->
</body>
</html>
